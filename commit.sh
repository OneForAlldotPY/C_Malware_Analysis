#!/bin/bash

# Exit immediately if a command exits with a non-zero status
set -e

# Print each command before executing it (for debugging)
set -x

# Handle files in the current directory (recursively) but exclude Git internal files and directories
find . -type f ! -path './.git/*' ! -name 'commit_and_push.sh' | while read -r file; do
    # Print the file being processed (for debugging)
    echo "Processing file: $file"

    # Add the file to staging
    git add "$file"
    
    # Get the filename without the path
    filename=$(basename "$file")
    
    # Commit the file with the filename as the commit message
    git commit -m "$filename"
done

# Push the changes to the remote repository
git push origin main  # Change 'main' to your branch name if different

